{
  "sites": {
    "whatsapp": {
      "webAddress": "https://web.whatsapp.com",
      "operations": [
        {
          "action": "wait_for_selector",
          "selector": "div[role='button'][title='New chat']",
          "timeout": 120000
        },
        {
          "action": "click",
          "selector": "div[role='button'][title='New chat']"
        },
        {
          "action": "sleep",
          "duration": 2
        },
        {
          "action": "fill",
          "selector": "div[role='textbox'] >> p",
          "value": "{{phoneNo}}"
        },
        {
          "action": "sleep",
          "duration": 2
        },
        {
          "action": "wait_for_selector",
          "selector": "div[role='listitem']"
        },
        {
          "action": "sleep",
          "duration": 2
        },
        {
          "action": "conditional_click",
          "condition_selector": "div:has-text('Not in your contacts')",
          "condition_selector_index":0,
          "true_selector": "div[role='button'][tabindex='0'] >> div[role='gridcell']",
          "true_index": 0,   
          "false_selector": "div[role='listitem']",
          "false_index": 1,   
          "fallback_selector": "div[role='button'][tabindex='0']"
        },
        {
          "action": "sleep",
          "duration": 2
        },
        {
          "action": "clear",
          "selector": "div[aria-placeholder='Type a message']"
        },
        {
          "action": "sleep",
          "duration": 2
        },
        {
          "action": "type",
          "selector": "div[aria-placeholder='Type a message']",
          "value": "{{message}}",
          "delay": 100
        },
        {
          "action": "logcsv",
          "message_sent": true,
          "attachments_sent": false
        },
        {
          "action": "click",
          "selector": "button[aria-label='Send']"
        },
        
        {
          "action": "click",
          "selector": "div[title='Attach']"
        },
        {
          "action": "attach_documents",
          "selector": "div[id='main'] >> footer >> span:has-text('Document') + input",
          "files": "{{document_attachments}}"
        },
        {
          "action": "click",
          "selector": "div[role='button'][aria-label='Send']"
        },
        
        {
          "action": "click",
          "selector": "div[title='Attach']"
        },
        {
          "action": "attach_videos",
          "selector": "div[id='main'] >> footer >> span:has-text('Photos & videos') + input",
          "files": "{{video_attachments}}"
        },
        {
          "action": "click",
          "selector": "div[role='button'][aria-label='Send']"
        },

        {
          "action": "click",
          "selector": "div[title='Attach']"
        },
        {
          "action": "attach_images",
          "selector": "div[id='main'] >> footer >> span:has-text('Photos & videos') + input",
          "files": "{{image_attachments}}"
        },
        {
          "action": "click",
          "selector": "div[role='button'][aria-label='Send']"
        },

        {
          "action": "logcsv",
          "message_sent": true,
          "attachments_sent": true
        },
        {
          "action": "sleep",
          "duration": 5
        }
      ]
    }
  }
}
